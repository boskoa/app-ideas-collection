"use strict";(self.webpackChunkapp_ideas_collection=self.webpackChunkapp_ideas_collection||[]).push([[92],{6092:function(e,t,n){n.r(t),n.d(t,{default:function(){return Y}});var a=n(9434),r=n(1626),i=n(9829),s=n(6916),l=(0,i.HF)({sortComparer:function(e,t){return e.title.localeCompare(t.title)}}),c=l.getInitialState(),o=(0,i.oM)({name:"events",initialState:c,reducers:{setAllEvents:function(e,t){l.upsertMany(e,t.payload)},addEvent:function(e,t){l.addOne(e,t.payload)},removeEvent:function(e,t){l.removeOne(e,t.payload)},updateEvent:function(e,t){l.updateOne(e,t.payload)}}}),u=l.getSelectors((function(e){return e.events})),d=u.selectIds,h=u.selectAll,v=(u.selectById,(0,s.P1)([h,function(e,t){return t}],(function(e,t){return e.filter((function(e){return new Date(e.date).toISOString().slice(0,10)===t.toISOString().slice(0,10)}))}))),x=(0,s.P1)(h,(function(e){var t=new Date;return e.filter((function(e){return e.reminder&&new Date(e.reminder)<=t}))})),m=(0,s.P1)(h,(function(e){return e.map((function(e){return new Date(e.date).getDate()}))})),f=o.actions,j=f.setAllEvents,p=f.addEvent,g=f.removeEvent,y=f.updateEvent,w=o.reducer,S=(0,i.xC)({reducer:{events:w}}),b=n(885),D=n(2791),N=n(184),C=function(e){var t=e.event,n=(0,D.useState)(!1),r=(0,b.Z)(n,2),i=r[0],s=r[1],l=(0,D.useState)(""),c=(0,b.Z)(l,2),o=c[0],u=c[1],d=(0,D.useState)(""),h=(0,b.Z)(d,2),v=h[0],x=h[1],m=(0,D.useState)(""),f=(0,b.Z)(m,2),j=f[0],p=f[1],w=(0,D.useState)(""),S=(0,b.Z)(w,2),C=S[0],E=S[1],Z=(0,a.I0)();if((0,D.useEffect)((function(){t&&(u(t.reminder),x(t.title),p(t.content),E(new Date(t.date).toISOString().substring(0,10)))}),[t]),!t)return(0,N.jsx)("div",{});return i?(0,N.jsx)("div",{className:"single-event",children:(0,N.jsx)("div",{className:"new-event-button",children:(0,N.jsxs)("div",{className:"new-event ".concat(i&&"show-new-event"),children:[(0,N.jsx)("p",{children:"Change event"}),(0,N.jsxs)("div",{className:"new-input",children:[(0,N.jsx)("label",{htmlFor:"title",children:"Title"}),(0,N.jsx)("input",{type:"text",value:v,name:"title",onChange:function(e){return x(e.target.value)}})]}),(0,N.jsxs)("div",{className:"new-input",children:[(0,N.jsx)("label",{htmlFor:"content",children:"Content"}),(0,N.jsx)("input",{type:"text-area",value:j,name:"content",onChange:function(e){return p(e.target.value)}})]}),(0,N.jsxs)("div",{className:"new-input",children:[(0,N.jsx)("label",{htmlFor:"date",children:"Date (YYYY-MM-DD): "}),(0,N.jsx)("input",{id:"date",type:"text",name:"date",value:C,onChange:function(e){return E(e.target.value)}})]}),(0,N.jsxs)("div",{className:"new-input",children:[(0,N.jsx)("label",{htmlFor:"reminder",children:"Reminder (days before the event): "}),(0,N.jsx)("input",{id:"reminder",type:"number",name:"reminder",min:"0",max:"370",value:o||0,onChange:function(e){return u(Number(e.target.value))}})]}),(0,N.jsx)("button",{onClick:function(){var e=null;o&&(e=new Date(C)).setDate(e.getDate()-o),Z(y({id:t.id,changes:{title:v,content:j,date:new Date(C).toString(),reminder:e?e.toString():e}})),s(!1)},children:"Update event"})]})})}):(0,N.jsxs)("div",{className:"single-event",children:[(0,N.jsx)("button",{id:"trash-button",className:"fa fa-trash",onClick:function(){Z(g(t.id))}}),(0,N.jsx)("p",{children:t.date.toLocaleString("sv",{timeZone:"Europe/Paris"}).slice(0,15)}),(0,N.jsxs)("p",{children:["Title: ",t.title]}),(0,N.jsxs)("p",{children:["Content: ",t.content]}),(0,N.jsxs)("p",{children:["Reminder: ",t.reminder?t.reminder.slice(0,10):"none"]}),(0,N.jsx)("button",{id:"update-button",className:"fa fa-pencil",onClick:function(){return s(!i)}})]})},E=n(7762),Z=function(e){var t=e.year,n=e.month,r=e.day,i=(0,D.useState)(!1),s=(0,b.Z)(i,2),l=s[0],c=s[1],o=(0,D.useState)(0),u=(0,b.Z)(o,2),h=u[0],v=u[1],x=(0,D.useState)(""),m=(0,b.Z)(x,2),f=m[0],j=m[1],g=(0,D.useState)(""),y=(0,b.Z)(g,2),w=y[0],S=y[1],C=(0,a.v9)(d).length,E=(0,a.I0)();return(0,N.jsxs)("div",{className:"new-event-button",children:[(0,N.jsx)("button",{onClick:function(){return c(!l)},children:"Add new event"}),(0,N.jsxs)("div",{className:"new-event ".concat(l&&"show-new-event"),children:[(0,N.jsx)("button",{id:"clear-button",className:"fa fa-trash",onClick:function(){j(""),S(""),v(0)}}),(0,N.jsxs)("p",{children:["New event for ",new Date(t,n,r,12).toDateString()]}),(0,N.jsxs)("div",{className:"new-input",children:[(0,N.jsx)("label",{htmlFor:"title",children:"Title"}),(0,N.jsx)("input",{type:"text",value:f,name:"title",onChange:function(e){return j(e.target.value)}})]}),(0,N.jsxs)("div",{className:"new-input",children:[(0,N.jsx)("label",{htmlFor:"content",children:"Content"}),(0,N.jsx)("input",{type:"text-area",value:w,name:"content",onChange:function(e){return S(e.target.value)}})]}),(0,N.jsxs)("div",{className:"new-input",children:[(0,N.jsx)("label",{htmlFor:"reminder",children:"Reminder (days before the event): "}),(0,N.jsx)("input",{id:"reminder",type:"number",name:"reminder",min:"0",max:"370",value:h,onChange:function(e){return v(Number(e.target.value))}})]}),(0,N.jsx)("button",{onClick:function(){var e=null;h&&(e=new Date(t,n,r,12)).setDate(e.getDate()-h);var a=new Date(t,n,r,12).toString();E(p({id:C+f,date:a,reminder:e?e.toString():e,title:f,content:w}))},children:"Create new event"})]})]})},k=function(){var e=(0,D.useState)(!1),t=(0,b.Z)(e,2),n=t[0],r=t[1],i=(0,a.v9)(x);(0,D.useEffect)((function(){i.length&&r(!0)}),[i]);return n?(0,N.jsxs)("div",{className:"reminders-container single-event alarm",children:[(0,N.jsx)("button",{id:"close-button",className:"fa fa-close",onClick:function(){r(!1);var e=setTimeout((function(){return r(!0)}),6e4);return function(){return clearTimeout(e)}}}),(0,N.jsx)("p",{children:(0,N.jsx)("strong",{children:"Upcomming events: "})}),i.map((function(e){return(0,N.jsx)("div",{children:(0,N.jsxs)("p",{children:[e.date.slice(0,10)," ",e.title]})},e.id)}))]}):(0,N.jsx)("div",{})},M=function(e){var t=e.month,n=e.setMonth;return(0,N.jsxs)("select",{name:"months",defaultValue:t,onChange:function(e){return n(Number(e.target.value))},children:[(0,N.jsx)("option",{value:0,children:"January"}),(0,N.jsx)("option",{value:1,children:"February"}),(0,N.jsx)("option",{value:2,children:"March"}),(0,N.jsx)("option",{value:3,children:"April"}),(0,N.jsx)("option",{value:4,children:"May"}),(0,N.jsx)("option",{value:5,children:"June"}),(0,N.jsx)("option",{value:6,children:"July"}),(0,N.jsx)("option",{value:7,children:"August"}),(0,N.jsx)("option",{value:8,children:"September"}),(0,N.jsx)("option",{value:9,children:"October"}),(0,N.jsx)("option",{value:10,children:"November"}),(0,N.jsx)("option",{value:11,children:"December"})]})},F=function(e){var t=e.year,n=e.setYear;return(0,N.jsx)("input",{type:"number",step:"1",value:t,placeholder:"Enter year",onChange:function(e){return n(e.target.value)}})},I=function(e){var t=e.sortedDates,n=e.setDetailed,a=e.setDay,r=e.year,i=e.setYear,s=e.month,l=e.setMonth,c=e.day,o=(0,D.useState)((new Date).getDate()),u=(0,b.Z)(o,2),d=u[0],h=u[1],v=(new Date).toLocaleString("sv",{timeZone:"Europe/Paris"}).slice(0,10);return(0,N.jsxs)("div",{children:[(0,N.jsxs)("div",{id:"inputs",children:[(0,N.jsx)(F,{year:r,setYear:i}),(0,N.jsx)(M,{month:s,setMonth:l})]}),(0,N.jsxs)("table",{className:"calendar-table",children:[(0,N.jsx)("thead",{children:(0,N.jsxs)("tr",{children:[(0,N.jsx)("th",{children:"Mon"}),(0,N.jsx)("th",{children:"Tue"}),(0,N.jsx)("th",{children:"Wed"}),(0,N.jsx)("th",{children:"Thu"}),(0,N.jsx)("th",{children:"Fri"}),(0,N.jsx)("th",{children:"Sat"}),(0,N.jsx)("th",{children:"Sun"})]})}),(0,N.jsx)("tbody",{children:t.map((function(e,t){return(0,N.jsx)("tr",{children:e.map((function(e,t){var r;return(0,N.jsx)("td",{align:"center",className:"".concat(e.active?"current":"not-current"," ").concat((null===(r=e.date)||void 0===r?void 0:r.toLocaleString("sv",{timeZone:"Europe/Paris"}).slice(0,10))===v&&"today"," ").concat(d===e.day&&"selected-date"," ").concat(e.events&&"with-events"),onClick:function(){a(e.day),h(e.day),e.active&&n(!0)},children:e.day},t)}))},t)}))})]}),(0,N.jsx)(Z,{year:r,month:s,day:c}),(0,N.jsx)(k,{})]})},O=function(e){var t=e.day,n=e.show,r=e.setShow,i=(0,a.v9)((function(e){return v(e,t)}));return(0,N.jsxs)("div",{className:"".concat((!n||!i.length)&&"events-hide"," events-show"),children:[(0,N.jsx)("button",{id:"close-button",className:"fa fa-close",onClick:function(){return r(!1)}}),(0,N.jsx)("h4",{children:"Events:"}),i.map((function(e){return(0,N.jsx)(C,{event:e},e.id)}))]})},T=function(){var e=(0,D.useState)((new Date).getFullYear()),t=(0,b.Z)(e,2),n=t[0],r=t[1],i=(0,D.useState)((new Date).getMonth()),s=(0,b.Z)(i,2),l=s[0],c=s[1],o=(0,D.useState)((new Date).getDate()),u=(0,b.Z)(o,2),d=u[0],v=u[1],x=(0,D.useState)(null),f=(0,b.Z)(x,2),p=f[0],g=f[1],y=(0,D.useState)([]),w=(0,b.Z)(y,2),S=w[0],C=w[1],Z=(0,D.useState)(!1),k=(0,b.Z)(Z,2),M=k[0],F=k[1],T=(0,a.I0)(),Y=(0,a.v9)(h),A=(0,a.v9)(m);(0,D.useEffect)((function(){var e=window.localStorage.getItem("calendarAppEvents");e&&T(j(JSON.parse(e)))}),[]),(0,D.useEffect)((function(){g(new Date(n,l+1,0).getDate())}),[n,l]),(0,D.useEffect)((function(){for(var e=[],t=1;t<=p;t++)e.push(new Date(n,l,t));C(e)}),[p,n,l]),(0,D.useEffect)((function(){Y&&window.localStorage.setItem("calendarAppEvents",JSON.stringify(Y))}),[Y]);var P=(0,D.useMemo)((function(){for(var e=S.concat(),t=[],n=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],a=0;e.length;){var r,i=[],s=(0,E.Z)(n);try{for(s.s();!(r=s.n()).done;){var l,c=r.value;if((null===(l=S[a])||void 0===l?void 0:l.toLocaleString("en-US",{weekday:"long"}))===c){var o=e.shift(),u=!!A.includes(a+1);i.push({day:a+1,date:o,active:!0,events:u}),a++}else i.push({day:null,date:null,active:!1})}}catch(d){s.e(d)}finally{s.f()}t.push(i)}return t}),[l,S,Y]);return S.length?(0,N.jsxs)("div",{id:"main-container",children:[S.length&&(0,N.jsx)(I,{sortedDates:P,setDetailed:F,setDay:v,year:n,setYear:r,month:l,setMonth:c,day:d}),(0,N.jsx)(O,{day:new Date(n,l,d,12),show:M,setShow:F})]}):(0,N.jsx)("div",{children:"Loading..."})},Y=function(){var e=r.h[7];return(0,N.jsx)(a.zt,{store:S,children:(0,N.jsxs)("div",{id:"calendar-container",children:[(0,N.jsx)("h3",{children:e.name}),(0,N.jsx)(C,{}),(0,N.jsx)(T,{})]})})}}}]);
//# sourceMappingURL=92.15b4bc2c.chunk.js.map